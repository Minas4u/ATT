<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project: Attendance Tracker</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f1f5f9;
            color: #334155;
        }
        .main-container {
            background-color: #ffffff;
            border-radius: 0.75rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.05), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            width: 100%;
            max-width: 72rem;
            padding: 1.5rem;
            margin: 2rem auto;
        }
        @media (min-width: 640px) { .main-container { padding: 2rem; } }
        
        #login-container {
            background-image: linear-gradient(135deg, #a1c4fd 0%, #c2e9fb 100%);
            border: 4px solid white;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
        .login-title {
            font-weight: 800;
            color: #1e3a8a; /* Dark Blue */
            text-shadow: 1px 1px 2px rgba(255,255,255,0.5);
        }
        .login-button {
            background-color: #ffffff;
            color: #1e3a8a;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            transition: all 0.2s ease-in-out;
        }
        .login-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 7px 10px rgba(0,0,0,0.1);
        }

        #main-app-wrapper header {
            border-bottom: 6px solid;
            border-image-slice: 1;
            border-image-source: linear-gradient(to right, #3b82f6, #f59e0b);
        }

        .helios-title {
            font-weight: 800;
            font-size: 2.5rem;
            color: #f59e0b; /* Orangish-yellow */
            background-color: #2563eb; /* Blue */
            padding: 0.5rem 1.5rem;
            border-radius: 0.5rem;
            display: inline-block;
            border: 3px solid #1d4ed8; /* Darker blue border */
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            text-shadow: 1px 1px 2px rgba(0,0,0,0.2);
        }
        @media (min-width: 640px) { .helios-title { font-size: 3.5rem; } }

        /* --- Navigation Buttons --- */
        .nav-button {
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            transition: all 0.2s ease-in-out;
            font-weight: 600;
            border: 2px solid;
            background-color: white; 
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            min-width: 140px;
            justify-content: center;
        }
        .nav-button:hover:not(.active) {
            background-color: #f8fafc;
        }
        
        .frame-blue { border-color: #3b82f6; color: #3b82f6; }
        .frame-yellow { border-color: #f59e0b; color: #f59e0b; }
        .frame-purple { border-color: #8b5cf6; color: #8b5cf6; }
        .frame-red { border-color: #ef4444; color: #ef4444; }
        .frame-green { border-color: #22c55e; color: #22c55e; }
        .frame-gray { border-color: #475569; color: #475569; }
        
        .nav-button.active-blue { background-color: #3b82f6; color: white; box-shadow: 0 4px 14px 0 rgba(59, 130, 246, 0.3); border-color: #1d4ed8; }
        .nav-button.active-yellow { background-color: #f59e0b; color: white; box-shadow: 0 4px 14px 0 rgba(245, 158, 11, 0.3); border-color: #b45309; }
        .nav-button.active-purple { background-color: #8b5cf6; color: white; box-shadow: 0 4px 14px 0 rgba(139, 92, 246, 0.3); border-color: #6d28d9; }
        .nav-button.active-red { background-color: #ef4444; color: white; box-shadow: 0 4px 14px 0 rgba(239, 68, 68, 0.3); border-color: #b91c1c; }
        .nav-button.active-green { background-color: #22c55e; color: white; box-shadow: 0 4px 14px 0 rgba(34, 197, 94, 0.3); border-color: #15803d; }
        .nav-button.active-gray { background-color: #475569; color: white; box-shadow: 0 4px 14px 0 rgba(71, 85, 105, 0.3); border-color: #1e293b; }

        .class-button {
             background-color: white;
        }
        .class-button.active-blue { background-color: #60a5fa; color: white; border-color: #2563eb; }
        .class-button.active-yellow { background-color: #fbbf24; color: white; border-color: #d97706; }
        .class-button.active-purple { background-color: #a78bfa; color: white; border-color: #7c3aed; }
        .class-button.active-red { background-color: #f87171; color: white; border-color: #dc2626; }
        .class-button.active-green { background-color: #4ade80; color: white; border-color: #16a34a; }
        
        .roster-header, .athlete-row {
            display: flex;
            align-items: center;
            padding: 0.75rem 0.5rem;
            border-bottom: 1px solid #e2e8f0;
        }
        .roster-header {
            font-weight: 700;
            color: #475569;
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            border-bottom-width: 2px;
        }
        .athlete-row:last-child { border-bottom: none; }
        .athlete-row:hover { background-color: #f8fafc; }
        
        .athlete-status {
            display: flex;
            align-items: center;
            flex-basis: 140px;
            flex-shrink: 0;
        }
        .athlete-name-container {
            display: flex;
            align-items: center;
            flex-grow: 1;
        }
        .athlete-surname, .athlete-firstname {
            font-size: 1.125rem;
        }
        /* CHANGED: Adjusted spacing for name columns */
        .athlete-surname {
            font-weight: 600;
            color: #1e293b;
            flex-basis: 40%;
            padding-right: 0.5rem;
        }
        .athlete-firstname {
            font-weight: 400;
            color: #334155;
            flex-basis: 60%;
        }
        .attendance-percentage {
            font-size: 0.875rem;
            font-weight: 500;
            color: #475569;
            margin-left: 0.75rem;
        }
        .payment-status-pill {
            font-size: 0.75rem;
            font-weight: 600;
            padding: 0.25rem 0.6rem;
            border-radius: 9999px;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-right: 0.5rem;
        }
        .payment-status-paid { background-color: #dcfce7; color: #166534; }
        .payment-status-unpaid { background-color: #fee2e2; color: #991b1b; }

        .health-status-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            margin-right: 1rem;
            flex-shrink: 0;
        }
        .health-status-y { background-color: #22c55e; }
        .health-status-n { background-color: #ef4444; }

        .attendance-toggle {
            position: relative;
            display: inline-block;
            width: 70px;
            height: 38px;
            flex-shrink: 0;
        }
        .attendance-toggle input { display: none; }
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0; left: 0; right: 0; bottom: 0;
            background-color: #cbd5e1;
            transition: .3s;
            border-radius: 38px;
        }
        .slider:before {
            position: absolute;
            content: "";
            height: 30px;
            width: 30px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .3s;
            border-radius: 50%;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        input:checked + .slider {
            background-color: #16a34a;
        }
        input:checked + .slider:before {
            transform: translateX(32px);
        }

        .search-input {
            width: 100%;
            padding: 0.75rem 1rem;
            font-size: 1rem;
            border-radius: 0.5rem;
            border: 1px solid #cbd5e1;
            background-color: #f8fafc;
        }
        .search-input:focus {
            outline: none;
            border-color: #059669;
            box-shadow: 0 0 0 3px rgba(5, 150, 105, 0.15);
        }
        .action-button {
            padding: 0.5rem 1rem;
            font-size: 0.875rem;
            font-weight: 600;
            border-radius: 0.5rem;
            border: 1px solid #cbd5e1;
            background-color: #fff;
            transition: all 0.2s;
        }
        .action-button:hover { background-color: #f8fafc; border-color: #94a3b8; }

        .roster-title-frame {
            background-color: #f8fafc;
            border-radius: 0.75rem;
            padding: 0.75rem 1.25rem;
            margin-bottom: 1rem;
            text-align: center;
            border: 4px solid;
            border-image-slice: 1;
            border-image-source: linear-gradient(to bottom right, #3b82f6, #f59e0b);
        }
        #roster-title {
            font-weight: 700;
            color: #1e293b;
        }
        
        .loader {
            border: 3px solid #e2e8f0;
            border-top: 3px solid #1e3a8a;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        .hidden { display: none !important; }
    </style>
</head>
<body class="p-4">

    <div id="login-container" class="main-container max-w-md">
        <header class="mb-8 text-center">
            <h1 class="text-4xl sm:text-5xl login-title">Παρουσιολόγιο</h1>
            <p class="text-blue-900 mt-2 font-semibold text-lg">ΗΛΙΟΣ 2.0</p>
        </header>
        <div class="space-y-4">
            <button id="loadDataButton" class="w-full flex justify-center items-center gap-2 py-3 px-4 border border-transparent rounded-lg text-lg font-semibold login-button">
                Load Roster
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M17 8l4 4m0 0l-4 4m4-4H3" />
                </svg>
            </button>
            <div id="login-loading-message" class="hidden flex flex-col items-center gap-2 text-blue-900 font-semibold">
                <div class="loader"></div>
                <span>Loading...</span>
            </div>
        </div>
    </div>

    <div id="main-app-wrapper" class="main-container hidden">
        <header class="mb-6 pb-6 text-center">
            <h1 class="helios-title">ΗΛΙΟΣ</h1>
            <div class="flex justify-center items-center flex-wrap gap-x-4 gap-y-2 mt-4">
                <p class="text-slate-500 text-lg" id="current-date-display"></p>
                <div id="monthly-counter" class="hidden bg-violet-100 text-violet-800 text-sm font-bold px-3 py-1 rounded-full">
                    Unique This Month: <span id="monthly-unique-count">0</span>
                </div>
            </div>
        </header>

        <nav class="mb-4 space-y-4">
            <div id="category-nav" class="flex flex-wrap justify-center gap-2 sm:gap-3"></div>
            <div id="class-nav" class="flex flex-wrap justify-center gap-2 sm:gap-3 border-t border-slate-200 pt-4"></div>
        </nav>

        <main id="app-content">
            <div id="loading-message" class="flex flex-col items-center gap-4 p-8 text-slate-600">
                <div class="loader"></div>
                <span class="text-lg font-medium">Loading attendance data...</span>
            </div>
            <div id="error-message" class="hidden text-center p-4 bg-red-100 text-red-800 rounded-lg"></div>

            <div id="content-wrapper" class="hidden">
                 <section id="roster-container">
                    <div class="roster-title-frame">
                        <h2 id="roster-title" class="text-2xl"></h2>
                    </div>
                    <div class="flex flex-col sm:flex-row sm:justify-between sm:items-center mb-4 gap-4">
                        <div id="roster-actions" class="flex items-center gap-2 p-2 bg-slate-50 rounded-lg">
                             <button id="mark-all-present" class="action-button">Mark All Present</button>
                             <button id="clear-all" class="action-button">Clear All</button>
                        </div>
                        <input type="text" id="search-bar" class="search-input sm:max-w-xs" placeholder="Search for an athlete...">
                    </div>
                    <div id="class-roster-content" class="bg-white rounded-lg border border-slate-200"></div>
                </section>
            </div>
        </main>
    </div>

<script>
// --- CONFIGURATION ---
const GOOGLE_SHEET_WEB_APP_URL = "https://script.google.com/macros/s/AKfycbwma1xxbqgwa36aPe3vz7OLs5QaLUcUiqpS-6DOR33NPlqSaNXHmkxVa8uQXG_GvvzeIA/exec";

const CATEGORIES = {
    'Ακαδημίες':      { classes: ['5:00', '6:00', '6:00β'], color: 'blue' },
    'Προαγωνιστικό': { classes: ['Α', 'Β'],              color: 'yellow' },
    'Αγωνιστικό':    { classes: ['R'],                   color: 'purple' },
    'Υποψήφιοι':     { classes: ['ΤΕΦΑΑ', 'ΣΤΡ/ΣΑ'],      color: 'red' },
    'Αθλούμενοι':    { classes: ['Ενήλικες', 'Δρομείς'],  color: 'green' }
};

// --- GLOBAL STATE ---
let allAthletesData = [];
let currentCategory = Object.keys(CATEGORIES)[0];
let currentClass = CATEGORIES[currentCategory].classes[0];

// --- DOM ELEMENT REFERENCES ---
const loginContainer = document.getElementById('login-container');
const mainAppWrapper = document.getElementById('main-app-wrapper');
const loadingMessageDiv = document.getElementById('loading-message');
const errorMessageDiv = document.getElementById('error-message');
const contentWrapper = document.getElementById('content-wrapper');
const loadDataButton = document.getElementById('loadDataButton');
const loginLoadingMessageDiv = document.getElementById('login-loading-message');
const searchBar = document.getElementById('search-bar');
const categoryNav = document.getElementById('category-nav');
const classNav = document.getElementById('class-nav');
const markAllPresentBtn = document.getElementById('mark-all-present');
const clearAllBtn = document.getElementById('clear-all');
const monthlyCounter = document.getElementById('monthly-counter');
const monthlyUniqueCountSpan = document.getElementById('monthly-unique-count');


// --- DATE HELPERS ---
const getTodayString = () => new Date().toISOString().slice(0, 10);
const getMonthStartEnd = () => {
    const now = new Date();
    const start = new Date(now.getFullYear(), now.getMonth(), 1);
    return { start };
};

// --- DATA FETCHING & UPDATING ---
async function fetchData() {
    loadingMessageDiv.classList.remove('hidden');
    errorMessageDiv.classList.add('hidden');
    contentWrapper.classList.add('hidden');
    try {
        const response = await fetch(GOOGLE_SHEET_WEB_APP_URL);
        if (!response.ok) throw new Error(`Network error: ${response.statusText}`);
        const data = await response.json();
        if (data.error) throw new Error(`Sheet error: ${data.error}`);
        allAthletesData = data.athletes;
        initializeApp();
    } catch (error) {
        console.error('Failed to fetch data:', error);
        errorMessageDiv.textContent = `Error: ${error.message}. Check sheet columns and redeploy script.`;
        loadingMessageDiv.classList.add('hidden');
        errorMessageDiv.classList.remove('hidden');
    }
}

async function updateAttendance(firstName, surname, isPresent, checkbox) {
    const date = getTodayString();
    const loader = checkbox.closest('.toggle-container').querySelector('.loader');
    loader.style.display = 'inline-block';
    try {
        const response = await fetch(GOOGLE_SHEET_WEB_APP_URL, {
            method: 'POST',
            body: JSON.stringify({ firstName, surname, date, status: isPresent ? 'Present' : '' }),
        });
        if (!response.ok) throw new Error('Network error.');
        const result = await response.json();
        if (result.status !== 'success') throw new Error(result.message);
        
        const athlete = allAthletesData.find(a => a.firstName === firstName && a.surname === surname);
        if (athlete) {
            if (!athlete.attendance) athlete.attendance = {};
            athlete.attendance[date] = isPresent;
        }
        renderRoster();
        updateMonthlyCounter();
    } catch (error) {
        console.error('Update failed:', error);
        checkbox.checked = !isPresent;
        alert(`Failed to update attendance for ${firstName} ${surname}.`);
    } finally {
        loader.style.display = 'none';
    }
}

function handleBulkUpdate(isPresent) {
    document.querySelectorAll('#class-roster-content .attendance-checkbox').forEach(checkbox => {
        if (checkbox.checked !== isPresent) {
            checkbox.checked = isPresent;
            checkbox.dispatchEvent(new Event('change'));
        }
    });
}

// --- RENDERING & NAVIGATION ---
function renderNavigation() {
    let navHTML = Object.keys(CATEGORIES).map(cat => {
        const color = CATEGORIES[cat].color;
        const activeClass = currentCategory === cat ? `active-${color}` : '';
        const frameClass = `frame-${color}`;
        return `<button class="nav-button category-btn ${frameClass} ${activeClass}" data-category="${cat}">${cat}</button>`;
    }).join('');
    
    const searchButtonActiveClass = currentCategory === 'ALL' ? 'active-gray' : '';
    navHTML += `<button class="nav-button frame-gray ${searchButtonActiveClass}" id="search-all-btn" data-category="ALL">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z" clip-rule="evenodd" /></svg>
        Search All
    </button>`;

    categoryNav.innerHTML = navHTML;
    
    if (currentCategory === 'ALL') {
        classNav.classList.add('hidden');
    } else {
        classNav.classList.remove('hidden');
        renderClassButtons();
    }

    document.getElementById('search-all-btn').addEventListener('click', () => {
        currentCategory = 'ALL';
        currentClass = null;
        searchBar.value = '';
        renderNavigation();
        renderRoster();
    });

    document.querySelectorAll('.category-btn').forEach(btn => {
        btn.addEventListener('click', (e) => {
            currentCategory = e.target.dataset.category;
            currentClass = CATEGORIES[currentCategory].classes[0];
            searchBar.value = '';
            renderNavigation();
            renderRoster();
        });
    });
}

function renderClassButtons() {
    const categoryColor = CATEGORIES[currentCategory].color;
    classNav.innerHTML = CATEGORIES[currentCategory].classes.map(cls => {
        const activeClass = cls === currentClass ? `active-${categoryColor}` : '';
        const frameClass = `frame-${categoryColor}`;
        return `<button class="nav-button class-button ${frameClass} ${activeClass}" data-class="${cls}">${cls}</button>`;
    }).join('');

    document.querySelectorAll('.class-button').forEach(btn => {
        btn.addEventListener('click', (e) => {
            currentClass = e.target.dataset.class;
            searchBar.value = '';
            renderClassButtons();
            renderRoster();
        });
    });
}

function updateMonthlyCounter() {
    const { start: monthStart } = getMonthStartEnd();
    const monthlyPresent = new Set();
    allAthletesData.forEach(athlete => {
        const fullName = `${athlete.firstName} ${athlete.surname}`;
        if (!athlete.attendance) return;
        for (const dateStr in athlete.attendance) {
            if (athlete.attendance[dateStr]) {
                const entryDate = new Date(dateStr.replace(/-/g, '/'));
                if (entryDate >= monthStart) {
                    monthlyPresent.add(fullName);
                }
            }
        }
    });
    monthlyUniqueCountSpan.textContent = monthlyPresent.size;
    monthlyCounter.classList.remove('hidden');
}


function calculateMonthlyAttendance(athlete) {
    const { start: monthStart } = getMonthStartEnd();
    const today = new Date();
    const allSessionDatesThisMonth = new Set();
    allAthletesData.forEach(ath => {
        if (ath.attendance) {
            for (const dateStr in ath.attendance) {
                const entryDate = new Date(dateStr.replace(/-/g, '/'));
                if (entryDate >= monthStart && entryDate <= today) {
                    allSessionDatesThisMonth.add(dateStr);
                }
            }
        }
    });

    const totalSessions = allSessionDatesThisMonth.size;
    if (totalSessions === 0) return "100%";

    let attendedSessions = 0;
    if (athlete.attendance) {
        allSessionDatesThisMonth.forEach(dateStr => {
            if (athlete.attendance[dateStr]) attendedSessions++;
        });
    }
    return `${Math.round((attendedSessions / totalSessions) * 100)}%`;
}

function renderRoster() {
    const rosterContent = document.getElementById('class-roster-content');
    const rosterTitle = document.getElementById('roster-title');
    
    const searchTerm = searchBar.value.toLowerCase();
    let athletesToDisplay;

    if (currentCategory === 'ALL') {
        rosterTitle.textContent = 'Αθλητές / Αθλήτριες';
        athletesToDisplay = allAthletesData.filter(athlete => 
            `${athlete.firstName} ${athlete.surname}`.toLowerCase().includes(searchTerm)
        );
    } else {
        rosterTitle.textContent = `${currentCategory} - ${currentClass}`;
        athletesToDisplay = allAthletesData.filter(athlete => 
            athlete.category === currentCategory && 
            athlete.class === currentClass &&
            `${athlete.firstName} ${athlete.surname}`.toLowerCase().includes(searchTerm)
        );
    }
    
    athletesToDisplay.sort((a, b) => a.surname.localeCompare(b.surname) || a.firstName.localeCompare(b.firstName));

    const headerHTML = `
        <div class="roster-header">
            <div class="athlete-status"></div>
            <div class="athlete-name-container">
                <div class="athlete-surname">ΕΠΙΘΕΤΟ</div>
                <div class="athlete-firstname">ΟΝΟΜΑ</div>
            </div>
            <div class="flex-shrink-0" style="width: 70px;"></div>
        </div>
    `;

    if (athletesToDisplay.length === 0) {
        rosterContent.innerHTML = headerHTML + `<p class="text-slate-500 italic p-6 text-center">No athletes found.</p>`;
        return;
    }

    const today = getTodayString();
    const athletesHTML = athletesToDisplay.map(athlete => {
        const isPaid = String(athlete.paymentStatus).toLowerCase() === 'paid';
        const healthStatus = String(athlete.health).toUpperCase();
        const isPresentToday = athlete.attendance && athlete.attendance[today];
        const attendancePercentage = calculateMonthlyAttendance(athlete);

        return `
            <div class="athlete-row">
                <div class="athlete-status">
                    <div class="payment-status-pill ${isPaid ? 'payment-status-paid' : 'payment-status-unpaid'}">${isPaid ? 'Paid' : 'Unpaid'}</div>
                    <div class="health-status-dot ${healthStatus === 'Y' ? 'health-status-y' : 'health-status-n'}" title="Health Status: ${healthStatus}"></div>
                </div>
                <div class="athlete-name-container">
                    <div class="athlete-surname">${athlete.surname}</div>
                    <div class="athlete-firstname">
                        ${athlete.firstName}
                        <span class="attendance-percentage">${attendancePercentage}</span>
                    </div>
                </div>
                <div class="toggle-container flex items-center">
                    <label class="attendance-toggle">
                        <input type="checkbox" class="attendance-checkbox" 
                               data-firstname="${athlete.firstName}" data-surname="${athlete.surname}" 
                               ${isPresentToday ? 'checked' : ''}>
                        <span class="slider"></span>
                    </label>
                    <div class="loader" style="display: none;"></div>
                </div>
            </div>
        `;
    }).join('');

    rosterContent.innerHTML = headerHTML + athletesHTML;

    rosterContent.querySelectorAll('.attendance-checkbox').forEach(checkbox => {
        checkbox.addEventListener('change', (e) => {
            const { firstname, surname } = e.target.dataset;
            updateAttendance(firstname, surname, e.target.checked, e.target);
        });
    });
}

// --- INITIALIZATION ---
function initializeApp() {
    loadingMessageDiv.classList.add('hidden');
    contentWrapper.classList.remove('hidden');
    mainAppWrapper.classList.remove('hidden');
    loginContainer.classList.add('hidden');
    
    searchBar.addEventListener('input', renderRoster);
    markAllPresentBtn.addEventListener('click', () => handleBulkUpdate(true));
    clearAllBtn.addEventListener('click', () => handleBulkUpdate(false));

    document.getElementById('current-date-display').textContent = new Date().toLocaleDateString('el-GR', {
        weekday: 'long', year: 'numeric', month: 'long', day: 'numeric'
    });
    
    updateMonthlyCounter();
    renderNavigation();
    renderRoster();
}

async function handleLoadData() {
    loadDataButton.classList.add('hidden');
    loginLoadingMessageDiv.classList.remove('hidden');
    await fetchData();
    loginLoadingMessageDiv.classList.add('hidden');
}

document.addEventListener('DOMContentLoaded', () => {
    loadDataButton.addEventListener('click', handleLoadData);
});

</script>
</body>
</html>
